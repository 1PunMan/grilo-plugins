Name:           grilo-plugins
Version:        @VERSION@
Release:        1
Summary:        Grilo plugins framework

Group:          Applications/Multimedia
License:        LGPLv2+
Source0:        http://ftp.gnome.org/pub/GNOME/sources/grilo-plugins/0.1/grilo-plugins-%{version}.tar.bz2
BuildRoot:      %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)

BuildRequires:  grilo-devel >= @VERSION@
BuildRequires:  gnome-common
BuildRequires:  glib2-devel >= 2.26.0
BuildRequires:  libxml2-devel
BuildRequires:  gupnp-devel >= 0.13.0
BuildRequires:  gupnp-av-devel >= 0.5.0
BuildRequires:  sqlite-devel
BuildRequires:  libgdata-devel
BuildRequires:  tracker-devel >= 0.9.0

Requires:       grilo >= @VERSION@
Requires:       gupnp >= 0.13.0
Requires:       gupnp-av >= 0.5.0
Requires:       tracker >= 0.9.0


%description
Grilo is a framework that provides access to different sources of
multimedia content, using a pluggable system.
This package contains plugins to get information from theses sources:
Apple Trailers
Bookmarks
Filesystem
Flickr
Gravatar
Jamendo
Last.fm (for album arts)
Local metadata (album arts and thumbnails)
Metadata Store
Podcasts
Shoutcast
Tracker
UPnP
Vimeo
Youtube

%prep
%setup -q

%build
%configure				\
	--disable-fakemetadata		\
	--disable-shoutcast		\
	--enable-apple-trailers		\
	--enable-bookmarks		\
	--enable-filesystem		\
	--enable-flickr			\
        --enable-gravatar               \
	--enable-jamendo		\
	--enable-lastfm-albumart	\
        --enable-localmetadata          \
        --enable-metadata-store         \
	--enable-podcasts		\
	--enable-tracker		\
	--enable-upnp			\
        --enable-vimeo                  \
	--enable-youtube

make %{?_smp_mflags}


%install
rm -rf $RPM_BUILD_ROOT
make install DESTDIR=$RPM_BUILD_ROOT

# Remove files that will not be packaged
rm -f $RPM_BUILD_ROOT%{_libdir}/grilo-0.1/*.la
rm -f $RPM_BUILD_ROOT%{_libdir}/grilo-0.1/*.a
rm -f $RPM_BUILD_ROOT%{_bindir}/*

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(-,root,root,-)
%doc AUTHORS COPYING NEWS README
%{_libdir}/grilo-0.1/*.so*
%{_datadir}/grilo-0.1/plugins/*.xml

%changelog
* Wed Apr 13 2011 Juan A. Suarez Romero <jasuarez@igalia.com> - 0.1.14-1
- General: get rid of unused definitions, use new "content-changed" API, added "module" information to XML files, use new API instead of deprecated ones
- Jamendo plugin: plugged some leaks
- LastFM Album Art plugin: resolve() is now a cancellable operation
- Local metadata plugin: small fixes, resolve() is now a cancellable operation
- Tracker plugin: several fixes
- UPnP plugin: plugged some leaks

* Wed Apr 06 2011 Juan A. Suarez Romero <jasuarez@igalia.com> - 0.1.13-1
- General: do not use grl_data_key_is_known(), as it is deprecated
- Tracker: do not load the plugin if Tracker is not running, allow Tracker versions below 0.10.5

* Wed Mar 30 2011 Juan A. Suarez Romero <jasuarez@igalia.com> - 01.12-1
- Local metadata plugin: add support for series and seasons
- Tracker plugin: several fixes and improvements, add support for writting back metadata.

* Thu Mar 17 2011 Juan A. Suarez Romero <jasuarez@igalia.com> - 0.1.11-1
- Filesystem plugin: small fix
- Flickr plugin: plugged a leak
- LastFM album art plugin: added extralarge and megalarge thumbnails
- Tracker plugin: several fixes, provided a tracker-based metadata source
- UPnP plugin: fixed small bug
- Youtube plugin: fixed BGO#643924 - [PATCH] youtube plugin not parsing date

* Fri Mar 04 2011 Juan A. Suarez Romero <jasuarez@igalia.com> - 0.1.10-1
- General: use the new grl_metadata_source_may_resolve() function, split src/ code between media and metadata sources
- Gravatar plugin: use the new multi-valued API to provide several avatars
- Jamendo plugin: fixed feeds category
- LastFM album art plugin: use the new mult-valued API to provide several thumbnails
- Podcasts plugin: fixed invalid GrlNetWc free
- Shoutcast plugin: disabled by default (it is broken)
- UPnP plugin: use GrlData API to set metadata properties
- Vimeo plugin: several fixes, fixed BGO#643811 - Date format for vimeo plugin
- Youtube plugin, use the new mult-valued API to provide several thumbnails

* Thu Feb 10 2011 Juan A. Suarez Romero <jasuarez@igalia.com> - 0.1.9-1
- General: implemented NULL-text search (search all)
- Bookmarks plugin: fixed saving/loading content from database, added content-changed notification
- Filesystem plugin: added cancellation support, added content-changed notification
- Flickr plugin: fixed Makefile.am
- Local metadata plugin: new plugin that provides covers and thumbnails from local filesystem
- Podcasts plugin: fixed search, added content-changed notification
- Tracker plugin: several fixes and improvements
- UPnP plugin: fixed warning, added content-changed notification

* Thu Jan 27 2011 Juan A. Suarez Romero <jasuarez@igalia.com> - 0.1.8-1
- General: use the new GrlConfig rework
- Filesystem plugin: implemented search() function
- Podcasts plugin: small fix in log domain
- Tracker plugin: new plugin that gets its content from Tracker
- UPnP plugin: several improvements and fixes, add support for thumbnails, implemented query() function
- Youtube plugin: plug leak

* Sat Jan 22 2011 Juan A. Suarez Romero <jasuarez@igalia.com> - 0.1.7-1
- General: fixes #627864, #628506, install plugins as loadable modules, use GrlNet, adapt code to changes in GrlPluginRegistry functions
- Apple trailers: general fixes, including bug #630538
- Filesystem plugin: implement media_from_uri() and test_media_from_uri()
- Flickr plugin: general fixes
- Podcasts plugin: general fixes
- Shoutcast plugin: general fixes
- UPnP plugin: added plugin deinit function
- Vimeo plugin: fix for bug #630494
- Youtube plugin: general fixes, fix for bug #636394, handle libdata 0.7 and 0.8 api

* Thu Aug 26 2010 Juan A. Suarez Romero <jasuarez@igalia.com> - 0.1.6-1
- General fixes, new metadata key system, new registering framework
- Apple trailers: general fixes, more keys, handling SD and HD videos
- Bookmarks: general fixes
- Fake metadata: general fixes
- Filesystem: general fixes, restrict content to a set of directories
- Flickr: general fixes, browse operation, handle personal content
- Gravatar: new plugin
- Jamendo: general fixes
- LastFM Album Art: general fixes
- Metadata Store: general fixes
- Podcasts: general fixes
- SHOUTCast: general fixes, cache root page, change ID encoding
- UPnP: general fixes
- Vimeo: general fixes
- Youtube: general fixes, handle more keys

* Fri May 07 2010 Juan A. Suarez Romero <jasuarez@igalia.com> - 0.1.5-1
- General: general fixes
- Apple Trailers: general fixes
- Bookmarks: set root category title
- Flickr: general fixes
- Jamendo: general fixes
- LastFM Album Art: general fixes
- Podcasts: set root category title
- Shoutcast: general fixes
- UPnP: use source name as root category title
- Vimeo: new plugin
- Youtube: use libgdata

* Fri Mar 12 2010 Juan A. Suarez Romero <jasuarez@igalia.com> - 0.1.4-1
- General: changes in Grilo API
- Bookmarks: some fixes
- Flickr: use the Grilo configuration system
- Metadata Storage: new plugin
- Podcasts: some fixes

* Mon Mar 01 2010 Juan A. Suarez Romero <jasuarez@igalia.com> - 0.1.3-1
- General: some fixes
- Apple Trailers: new plugin
- Bookmarks: some fixes
- Podcasts: some fixes
- Shoutcast: some fixes
- Upnp: some fixes

* Fri Feb 19 2010 Juan A. Suarez Romero <jasuarez@igalia.com> - 0.1.2-1
- Bookmarks: new plugin.
- Flickr: drop flickcurl library.
- Jamendo: some fixes.
- Podcasts: some fixes
- Shoutcast: new plugin.
- Upnp: support for new gupnp-av-1.0 versions (>=0.5).

* Tue Feb 10 2010 Juan A. Suarez Romero <jasuarez@igalia.com> - 0.1.1-1
- Initial release
