Name:           grilo-plugins
Version:        @VERSION@
Release:        1
Summary:        Grilo plugins framework

Group:          Applications/Multimedia
License:        LGPLv2+
Source0:        grilo-plugins-%{version}.tar.gz
BuildRoot:      %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)

BuildRequires:  grilo-devel >= 0.1.5
BuildRequires:  gnome-common
BuildRequires:  glib2-devel
BuildRequires:  libxml2-devel
BuildRequires:  gupnp-devel
BuildRequires:  gupnp-av-devel
BuildRequires:  sqlite-devel
BuildRequires:  libgdata-devel

Requires:       grilo >= 0.1.5
Requires:       gupnp
Requires:       gupnp-av

%description
Grilo is a framework that provides access to different sources of
multimedia content, using a pluggable system.
This package contains plugins to get information from theses sources:
Apple Trailers
Bookmarks
Filesystem
Flickr
Jamendo
Last.fm (for album arts)
Metadata Store
Podcasts
Shoutcast
UPnP
Vimeo
Youtube

%prep
%setup -q

%build
%configure				\
	--disable-fakemetadata		\
	--enable-apple-trailers		\
	--enable-bookmarks		\
	--enable-filesystem		\
	--enable-flickr			\
	--enable-jamendo		\
	--enable-lastfm-albumart	\
        --enable-metadata-store         \
	--enable-podcasts		\
	--enable-shoutcast		\
	--enable-upnp			\
        --enable-vimeo                  \
	--enable-youtube

make %{?_smp_mflags}


%install
rm -rf $RPM_BUILD_ROOT
make install DESTDIR=$RPM_BUILD_ROOT

# Remove files that will not be packaged
rm -f $RPM_BUILD_ROOT%{_libdir}/grilo-0.1/*.la
rm -f $RPM_BUILD_ROOT%{_libdir}/grilo-0.1/*.a
rm -f $RPM_BUILD_ROOT%{_bindir}/*

%clean
rm -rf $RPM_BUILD_ROOT


%files
%defattr(-,root,root,-)
%doc AUTHORS COPYING NEWS README
%{_libdir}/grilo-0.1/*.so*

%changelog
* Fri May 07 2010 Juan A. Suarez Romero <jasuarez@igalia.com> - 0.1.5-1
- General: general fixes
- Apple Trailers: general fixes
- Bookmarks: set root category title
- Flickr: general fixes
- Jamendo: general fixes
- LastFM Album Art: general fixes
- Podcasts: set root category title
- Shoutcast: general fixes
- UPnP: use source name as root category title
- Vimeo: new plugin
- Youtube: use libgdata

* Fri Mar 12 2010 Juan A. Suarez Romero <jasuarez@igalia.com> - 0.1.4-1
- General: changes in Grilo API
- Bookmarks: some fixes
- Flickr: use the Grilo configuration system
- Metadata Storage: new plugin
- Podcasts: some fixes

* Mon Mar 01 2010 Juan A. Suarez Romero <jasuarez@igalia.com> - 0.1.3-1
- General: some fixes
- Apple Trailers: new plugin
- Bookmarks: some fixes
- Podcasts: some fixes
- Shoutcast: some fixes
- Upnp: some fixes

* Fri Feb 19 2010 Juan A. Suarez Romero <jasuarez@igalia.com> - 0.1.2-1
- Bookmarks: new plugin.
- Flickr: drop flickcurl library.
- Jamendo: some fixes.
- Podcasts: some fixes
- Shoutcast: new plugin.
- Upnp: support for new gupnp-av-1.0 versions (>=0.5).

* Tue Feb 10 2010 Juan A. Suarez Romero <jasuarez@igalia.com> - 0.1.1-1
- Initial release
